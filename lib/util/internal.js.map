{"version":3,"file":"internal.js","sources":["../../src/util/internal.ts"],"sourcesContent":["/*\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport { SfdxError } from '../sfdxError';\nimport { fs } from './fs';\n/**\n * The name of the project config file.\n * @ignore\n */\n// This has to be defined on util to prevent circular deps with project and configFile.\nexport const SFDX_PROJECT_JSON = 'sfdx-project.json';\n\n/**\n * Performs an upward directory search for an sfdx project file. Returns the absolute path to the project.\n *\n * **See** {@link SFDX_PROJECT_JSON}\n *\n * **See** {@link traverseForFile}\n *\n * **Throws** *{@link SfdxError}{ name: 'InvalidProjectWorkspace' }* If the current folder is not located in a workspace.\n * @param dir The directory path to start traversing from.\n * @ignore\n */\nexport async function resolveProjectPath(dir: string = process.cwd()): Promise<string> {\n  const projectPath = await fs.traverseForFile(dir, SFDX_PROJECT_JSON);\n  if (!projectPath) {\n    throw SfdxError.create('@salesforce/core', 'config', 'InvalidProjectWorkspace');\n  }\n  return projectPath;\n}\n\n/**\n * Performs a synchronous upward directory search for an sfdx project file. Returns the absolute path to the project.\n *\n * **See** {@link SFDX_PROJECT_JSON}\n *\n * **See** {@link traverseForFile}\n *\n * **Throws** *{@link SfdxError}{ name: 'InvalidProjectWorkspace' }* If the current folder is not located in a workspace.\n * @param dir The directory path to start traversing from.\n * @ignore\n */\nexport function resolveProjectPathSync(dir: string = process.cwd()): string {\n  const projectPath = fs.traverseForFileSync(dir, SFDX_PROJECT_JSON);\n  if (!projectPath) {\n    throw SfdxError.create('@salesforce/core', 'config', 'InvalidProjectWorkspace');\n  }\n  return projectPath;\n}\n"],"names":["fs","SfdxError"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;;;AASA;;;;AAIA;MACa,iBAAiB,GAAG,oBAAoB;AAErD;;;;;;;;;;;AAWO,eAAe,kBAAkB,CAAC,MAAc,OAAO,CAAC,GAAG,EAAE;IAClE,MAAM,WAAW,GAAG,MAAMA,UAAE,CAAC,eAAe,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC;IACrE,IAAI,CAAC,WAAW,EAAE;QAChB,MAAMC,mBAAS,CAAC,MAAM,CAAC,kBAAkB,EAAE,QAAQ,EAAE,yBAAyB,CAAC,CAAC;KACjF;IACD,OAAO,WAAW,CAAC;AACrB,CAAC;AAED;;;;;;;;;;;SAWgB,sBAAsB,CAAC,MAAc,OAAO,CAAC,GAAG,EAAE;IAChE,MAAM,WAAW,GAAGD,UAAE,CAAC,mBAAmB,CAAC,GAAG,EAAE,iBAAiB,CAAC,CAAC;IACnE,IAAI,CAAC,WAAW,EAAE;QAChB,MAAMC,mBAAS,CAAC,MAAM,CAAC,kBAAkB,EAAE,QAAQ,EAAE,yBAAyB,CAAC,CAAC;KACjF;IACD,OAAO,WAAW,CAAC;AACrB;;;;;;"}