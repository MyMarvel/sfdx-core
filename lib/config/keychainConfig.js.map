{"version":3,"file":"keychainConfig.js","sources":["../../src/config/keychainConfig.ts"],"sourcesContent":["/*\n * Copyright (c) 2018, salesforce.com, inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\nimport { dirname as pathDirname } from 'path';\nimport { fs } from '../util/fs';\nimport { ConfigFile } from './configFile';\nimport { ConfigContents } from './configStore';\n\n/**\n * Represent a key chain config backed by a json file.\n */\n// istanbul ignore next - getPassword/setPassword is always mocked out\nexport class KeychainConfig extends ConfigFile<ConfigFile.Options> {\n  public static getFileName(): string {\n    return 'key.json';\n  }\n\n  /**\n   * Gets default options for the KeychainConfig\n   */\n  public static getDefaultOptions(): ConfigFile.Options {\n    return ConfigFile.getDefaultOptions(true, KeychainConfig.getFileName());\n  }\n\n  /**\n   * Write the config file with new contents. If no new contents are passed in\n   * it will write this.contents that was set from read(). Returns the written contents.\n   *\n   * @param newContents the new contents of the file\n   */\n  public async write(newContents?: ConfigContents): Promise<ConfigContents> {\n    if (newContents != null) {\n      this.setContents(newContents);\n    }\n\n    await fs.mkdirp(pathDirname(this.getPath()));\n\n    await fs.writeFile(this.getPath(), JSON.stringify(this.getContents(), null, 4), { mode: '600' });\n\n    return this.getContents();\n  }\n}\n"],"names":["ConfigFile","fs","pathDirname"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;AAYA;;;AAGA;MACa,cAAe,SAAQA,4BAA8B;IACzD,OAAO,WAAW;QACvB,OAAO,UAAU,CAAC;KACnB;;;;IAKM,OAAO,iBAAiB;QAC7B,OAAOA,4BAAU,CAAC,iBAAiB,CAAC,IAAI,EAAE,cAAc,CAAC,WAAW,EAAE,CAAC,CAAC;KACzE;;;;;;;IAQM,MAAM,KAAK,CAAC,WAA4B;QAC7C,IAAI,WAAW,IAAI,IAAI,EAAE;YACvB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;SAC/B;QAED,MAAMC,UAAE,CAAC,MAAM,CAACC,YAAW,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAE7C,MAAMD,UAAE,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;QAEjG,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;KAC3B;;;;;"}